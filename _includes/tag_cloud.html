<div class="tag-cloud">
    <ul class="tags">
        {% if include.context == "post" %}
            {% for tag in page.tags %}
                <li><a href="{{ site.url }}/tags#{{ tag | cgi_escape }}" class="tag">{{ tag }}</a></li>
            {% endfor %}
        {% else %}
            {% capture site_tags %}
                {% for tag in site.tags %}{{ tag | first }}{% unless forloop.last %},{% endunless %}{% endfor %}
            {% endcapture %}
            {% assign tag_words = site_tags | split:',' | sort %}
            {% for item in (0..site.tags.size) %}{% unless forloop.last %}
                {% capture this_word %}{{ tag_words[item] | strip_newlines }}{% endcapture %}
                <li><a href="{{ site.url }}/tags#{{ this_word | cgi_escape }}" class="tag">{{ this_word }} <span>({{ site.tags[this_word].size }})</span></a></li>
            {% endunless %}{% endfor %}
        {% endif %}
    </ul>
</div>